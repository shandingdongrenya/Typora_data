```c
//数据处理
void vTask_Input(void *pvParameters)
{
	HX711_init();
	
	for (;;)
	{
		taskENTER_CRITICAL();
		// U_para.U_ADC_CH1 = (float)Get_Adc(ADC_CH1);
		// U_para.U_ADC_CH6 = (float)Get_Adc(ADC_CH6);
		U_para.delta_U = (float)ReadCount();	//读取此时的传感器输出值
		taskEXIT_CRITICAL();

		Para.weght = U_para.delta_U/Para.gapvalue;
		Para.weght = Para.weght - Para.Tray_weight;
		//U_para.delta_U = U_para.U_ADC_CH1-U_para.U_ADC_CH6;
		Para.Total_price = Para.weght*Para.unit_price;
		sprintf(Para_str.Total_price,"Total_price: %f", Para.Total_price);
		lv_label_set_text(Para_label.Total_price,Para_str.Total_price);//设置文本
		sprintf(Para_str.weight,"weight: %f", Para.weght);
		lv_label_set_text(Para_label.weight,Para_str.weight);//设置文本
		vTaskDelay(100/portTICK_RATE_MS);
	}	
}



//数据结构
enum{
    label_weight = 0,
    label_unit_price,
    label_Total_price,
    label_Step_size,
    label_range,
    label_gapvalue,
};

typedef struct {
    lv_obj_t* scr;          //当前活跃屏幕句柄
    lv_obj_t* weight;       //质量的句柄
    lv_obj_t* unit_price;   //单价的句柄
    lv_obj_t* Total_price;  //总价的句柄
    lv_obj_t* cur_label;    //当前选中的句柄
    lv_obj_t* UP;           //增加的句柄
    lv_obj_t* DOWN;         //减少的句柄
    lv_obj_t* Step_size;    //步长的句柄
    lv_obj_t* range;        //量程的句柄
}Para_label_t;

typedef struct {
    volatile float weght;            //质量
    volatile float Tray_weight;       //托盘质量
    volatile float unit_price;       //单价
    volatile float Total_price;      //总价
    volatile float Step_size;        //步长
    volatile char  label_index;      //当前标签索引
    volatile int   range;            //量程
    volatile float gapvalue;         //AD转化参数
    volatile float *cur_para;        //当前的变量
}Para_t;

typedef struct {
    char weight[30];        //质量Text
    char unit_price[30];    //单价Text
    char Total_price[30];   //总价Text
    char Step_size[30];     //步长Text
    char cur_label[50];     //当前窗口Text
    char range[30];         //量程Text
}Para_str_t;

typedef struct {
    volatile float U_ADC_CH1;        //通道一读取的电压
    volatile float U_ADC_CH6;        //通道二读取的电压
    volatile float Tray_weight;       //空载时的电压
    volatile float delta_U;          //电压差
    volatile float epsilon;          //应变量
    volatile float VCC_E;            //参考电压
}U_para_t;


/**
 * 获取HX711的数据
 * @retval count 返回AD值
 */
u16 ReadCount(void)
{
	u16 Count;
	u8 i;
	PD_SCK = 0; //使能AD（PD_SCK 置低）
	Count=0;
	while(PD_DT); //AD转换未结束则等待，否则开始读取
	for (i=0;i<24;i++)
	{
		PD_SCK = 1; //PD_SCK 置高（发送脉冲）
		Count=Count<<1; //下降沿来时变量Count左移一位，右侧补零
		PD_SCK = 0; //PD_SCK 置低
		if(PD_DT) Count++;
	}
	PD_SCK = 1;
	Count=Count^0x800000;//第25个脉冲下降沿来时，转换数据
	PD_SCK = 0;

	return(Count);
}

```

